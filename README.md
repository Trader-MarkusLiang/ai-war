# NOFX é˜¿é‡Œäº‘æœåŠ¡å™¨éƒ¨ç½²ç®¡ç†

è¿™ä¸ªç›®å½•åŒ…å«äº†ç®¡ç†é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸ŠNOFXé¡¹ç›®çš„æ‰€æœ‰è„šæœ¬å’Œæ–‡æ¡£ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
nofx-aliyun-deploy/
â”œâ”€â”€ README.md                    # æœ¬æ–‡æ¡£ï¼ˆå®Œæ•´æŒ‡å—ï¼‰
â”œâ”€â”€ QUICK_START.md              # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ deploy_to_aliyun.sh         # ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆé¦–æ¬¡éƒ¨ç½²ä½¿ç”¨ï¼‰
â”œâ”€â”€ tunnel_simple.sh            # SSHéš§é“è„šæœ¬ - ç®€åŒ–ç‰ˆï¼ˆæ¨èï¼‰â­
â”œâ”€â”€ tunnel.sh                   # SSHéš§é“è„šæœ¬ - å®Œæ•´ç‰ˆ
â”œâ”€â”€ remote_mount.sh             # è¿œç¨‹ç›®å½•æŒ‚è½½è„šæœ¬ï¼ˆç¼–è¾‘æœåŠ¡å™¨æ–‡ä»¶ï¼‰â­
â”œâ”€â”€ server_manage.sh            # æœåŠ¡å™¨ç®¡ç†è„šæœ¬
â”œâ”€â”€ config_template.json        # é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼ˆé’ˆå¯¹1Gå†…å­˜ä¼˜åŒ–ï¼‰
â”œâ”€â”€ remote-nofx/                # è¿œç¨‹ç›®å½•æŒ‚è½½ç‚¹ï¼ˆç¼–è¾‘è¿™é‡Œçš„æ–‡ä»¶ï¼‰
â”œâ”€â”€ backups/                    # å¤‡ä»½æ–‡ä»¶å­˜æ”¾ç›®å½•
â””â”€â”€ logs/                       # æ—¥å¿—æ–‡ä»¶å­˜æ”¾ç›®å½•
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨SSHéš§é“ï¼ˆè®¿é—®å‰ç«¯ï¼‰

**æ¨èä½¿ç”¨ç®€åŒ–ç‰ˆè„šæœ¬ï¼š**

```bash
cd ~/nofx-aliyun-deploy
./tunnel_simple.sh
```

ä¿æŒç»ˆç«¯çª—å£æ‰“å¼€ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®ï¼š
```
http://localhost:3333
```

### 2. æŒ‚è½½è¿œç¨‹ç›®å½•ï¼ˆç¼–è¾‘æœåŠ¡å™¨æ–‡ä»¶ï¼‰â­ æ–°å¢

**ä½¿ç”¨SSHFSæŒ‚è½½è¿œç¨‹ç›®å½•åˆ°æœ¬åœ°ï¼š**

```bash
cd ~/nofx-aliyun-deploy
./remote_mount.sh open
```

è¿™ä¼šï¼š
- âœ… å°†æœåŠ¡å™¨çš„ `/opt/nofx` æŒ‚è½½åˆ° `./remote-nofx/`
- âœ… è‡ªåŠ¨åœ¨Cursorä¸­æ‰“å¼€
- âœ… å¯ä»¥åƒç¼–è¾‘æœ¬åœ°æ–‡ä»¶ä¸€æ ·ç¼–è¾‘è¿œç¨‹æ–‡ä»¶
- âœ… æ‰€æœ‰ä¿®æ”¹å®æ—¶åŒæ­¥åˆ°æœåŠ¡å™¨

### 3. åœæ­¢æœåŠ¡

```bash
# åœæ­¢SSHéš§é“
# åœ¨è¿è¡Œéš§é“çš„ç»ˆç«¯çª—å£æŒ‰ Ctrl+C

# å¸è½½è¿œç¨‹ç›®å½•
./remote_mount.sh umount
```

### 4. ç®¡ç†æœåŠ¡å™¨

```bash
# æŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€
./server_manage.sh status

# æŸ¥çœ‹æ—¥å¿—
./server_manage.sh logs

# é‡å¯æœåŠ¡
./server_manage.sh restart
```

---

## ğŸ“‹ æœåŠ¡å™¨ä¿¡æ¯

- **æœåŠ¡å™¨IP**: 47.236.159.60
- **é…ç½®**: 2æ ¸1G + 2G Swap
- **ç³»ç»Ÿ**: Ubuntu 20.04 LTS
- **é¡¹ç›®è·¯å¾„**: /opt/nofx
- **Docker**: å·²å®‰è£…å¹¶è¿è¡Œ

---

## ğŸ”§ è„šæœ¬è¯¦ç»†è¯´æ˜

### 1. tunnel_simple.sh - SSHéš§é“ï¼ˆç®€åŒ–ç‰ˆï¼‰â­ æ¨è

**åŠŸèƒ½**ï¼š
- å»ºç«‹SSHéš§é“ï¼Œå®‰å…¨è®¿é—®æœåŠ¡å™¨ä¸Šçš„NOFXæœåŠ¡
- å‰å°è¿è¡Œï¼Œè¿æ¥æœ€ç¨³å®š
- è‡ªåŠ¨æ£€æŸ¥ç«¯å£å ç”¨
- æ˜¾ç¤ºæ¸…æ™°çš„è¿æ¥çŠ¶æ€

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
./tunnel_simple.sh
```

**ç«¯å£æ˜ å°„**ï¼š
- æœ¬åœ° `3333` â†’ æœåŠ¡å™¨ `3000` (å‰ç«¯)
- æœ¬åœ° `8888` â†’ æœåŠ¡å™¨ `8080` (åç«¯API)

**ç‰¹ç‚¹**ï¼š
- âœ… æœ€ç¨³å®šå¯é 
- âœ… è‡ªåŠ¨ä¿æ´»æœºåˆ¶
- âœ… å‹å¥½çš„ç”¨æˆ·ç•Œé¢
- âœ… é€‚åˆæ—¥å¸¸ä½¿ç”¨

---

### 2. tunnel.sh - SSHéš§é“ï¼ˆå®Œæ•´ç‰ˆï¼‰

**åŠŸèƒ½**ï¼š
- å®Œæ•´çš„SSHéš§é“ç®¡ç†å·¥å…·
- æ”¯æŒåå°è¿è¡Œå’Œå‰å°è¿è¡Œ
- æä¾›çŠ¶æ€æŸ¥è¯¢åŠŸèƒ½

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
./tunnel.sh start      # åå°å¯åŠ¨
./tunnel.sh stop       # åœæ­¢éš§é“
./tunnel.sh status     # æŸ¥çœ‹çŠ¶æ€
./tunnel.sh restart    # é‡å¯éš§é“
./tunnel.sh fg         # å‰å°è¿è¡Œï¼ˆè°ƒè¯•ç”¨ï¼‰
./tunnel.sh help       # æ˜¾ç¤ºå¸®åŠ©
```

**é€‚ç”¨åœºæ™¯**ï¼š
- éœ€è¦åå°è¿è¡Œéš§é“
- éœ€è¦è„šæœ¬åŒ–ç®¡ç†
- é«˜çº§ç”¨æˆ·ä½¿ç”¨

---

### 3. remote_mount.sh - è¿œç¨‹ç›®å½•æŒ‚è½½ â­ æ–°å¢

**åŠŸèƒ½**ï¼š
- ä½¿ç”¨SSHFSå°†æœåŠ¡å™¨ç›®å½•æŒ‚è½½åˆ°æœ¬åœ°
- å¯ä»¥åœ¨Cursorä¸­ç›´æ¥ç¼–è¾‘æœåŠ¡å™¨æ–‡ä»¶
- æ‰€æœ‰ä¿®æ”¹å®æ—¶åŒæ­¥åˆ°æœåŠ¡å™¨
- è‡ªåŠ¨é‡è¿æœºåˆ¶

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
./remote_mount.sh mount      # æŒ‚è½½è¿œç¨‹ç›®å½•
./remote_mount.sh open       # æŒ‚è½½å¹¶åœ¨Cursorä¸­æ‰“å¼€
./remote_mount.sh umount     # å¸è½½è¿œç¨‹ç›®å½•
./remote_mount.sh status     # æŸ¥çœ‹æŒ‚è½½çŠ¶æ€
./remote_mount.sh help       # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

**æŒ‚è½½ä½ç½®**ï¼š
- è¿œç¨‹ç›®å½•ï¼š`/opt/nofx`ï¼ˆæœåŠ¡å™¨ï¼‰
- æœ¬åœ°æŒ‚è½½ç‚¹ï¼š`~/nofx-aliyun-deploy/remote-nofx/`

**ç‰¹ç‚¹**ï¼š
- âœ… æ— éœ€Remote-SSHæ‰©å±•
- âœ… å®æ—¶åŒæ­¥ä¿®æ”¹
- âœ… è‡ªåŠ¨é‡è¿
- âœ… å®Œæ•´çš„CursoråŠŸèƒ½æ”¯æŒ

**ä½¿ç”¨åœºæ™¯**ï¼š
- ç¼–è¾‘é…ç½®æ–‡ä»¶
- ä¿®æ”¹ä»£ç 
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶
- è°ƒè¯•é—®é¢˜

---

### 4. server_manage.sh - æœåŠ¡å™¨ç®¡ç†

**åŠŸèƒ½**ï¼š
- è¿œç¨‹ç®¡ç†æœåŠ¡å™¨ä¸Šçš„NOFXæœåŠ¡
- æŸ¥çœ‹æ—¥å¿—å’ŒçŠ¶æ€
- æ‰§è¡Œå¤‡ä»½å’Œæ›´æ–°
- ç›‘æ§ç³»ç»Ÿèµ„æº

**å¸¸ç”¨å‘½ä»¤**ï¼š

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./server_manage.sh status

# æŸ¥çœ‹æ—¥å¿—
./server_manage.sh logs              # æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
./server_manage.sh logs backend      # åªçœ‹åç«¯æ—¥å¿—
./server_manage.sh logs frontend     # åªçœ‹å‰ç«¯æ—¥å¿—

# æœåŠ¡æ§åˆ¶
./server_manage.sh start             # å¯åŠ¨æœåŠ¡
./server_manage.sh stop              # åœæ­¢æœåŠ¡
./server_manage.sh restart           # é‡å¯æœåŠ¡
./server_manage.sh rebuild           # é‡æ–°æ„å»º

# æ•°æ®ç®¡ç†
./server_manage.sh backup            # å¤‡ä»½æ•°æ®
./server_manage.sh update            # æ›´æ–°ä»£ç 

# é…ç½®ç®¡ç†
./server_manage.sh config            # ç¼–è¾‘é…ç½®æ–‡ä»¶
./server_manage.sh view-config       # æŸ¥çœ‹å½“å‰é…ç½®

# ç³»ç»Ÿç»´æŠ¤
./server_manage.sh monitor           # ç³»ç»Ÿç›‘æ§
./server_manage.sh diagnose          # è¯Šæ–­é—®é¢˜
./server_manage.sh clean-logs        # æ¸…ç†æ—§æ—¥å¿—

# SSHç™»å½•
./server_manage.sh ssh               # SSHç™»å½•åˆ°æœåŠ¡å™¨
```

---

### 4. deploy_to_aliyun.sh - ä¸€é”®éƒ¨ç½²

**åŠŸèƒ½**ï¼š
- é¦–æ¬¡éƒ¨ç½²æ—¶ä½¿ç”¨
- è‡ªåŠ¨å®Œæˆæ‰€æœ‰é…ç½®

**éƒ¨ç½²æ­¥éª¤**ï¼š
1. åˆ›å»ºSwapäº¤æ¢ç©ºé—´ï¼ˆ2Gï¼‰
2. æ›´æ–°ç³»ç»Ÿå¹¶å®‰è£…åŸºç¡€å·¥å…·
3. å®‰è£…Dockerå’ŒDocker Compose
4. å…‹éš†NOFXé¡¹ç›®åˆ° `/opt/nofx`
5. åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
6. é…ç½®å†…å­˜ä¼˜åŒ–ï¼ˆé™åˆ¶å®¹å™¨å†…å­˜ä½¿ç”¨ï¼‰
7. é…ç½®é˜²ç«å¢™è§„åˆ™
8. åˆ›å»ºsystemdè‡ªåŠ¨å¯åŠ¨æœåŠ¡
9. åˆ›å»ºç›‘æ§å’Œå¤‡ä»½è„šæœ¬

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp deploy_to_aliyun.sh root@47.236.159.60:/root/

# SSHç™»å½•åˆ°æœåŠ¡å™¨
ssh root@47.236.159.60

# è¿è¡Œéƒ¨ç½²è„šæœ¬
bash /root/deploy_to_aliyun.sh
```

**æ³¨æ„**ï¼šæ­¤è„šæœ¬å·²ç»è¿è¡Œè¿‡ï¼Œæ— éœ€å†æ¬¡æ‰§è¡Œï¼Œé™¤ééœ€è¦é‡æ–°éƒ¨ç½²ã€‚

---

### 5. config_template.json - é…ç½®æ¨¡æ¿

**åŠŸèƒ½**ï¼š
- æä¾›é’ˆå¯¹1Gå†…å­˜ä¼˜åŒ–çš„é…ç½®æ¨¡æ¿
- åŒ…å«æ‰€æœ‰å¿…è¦çš„é…ç½®é¡¹

**å…³é”®é…ç½®é¡¹**ï¼š

```json
{
  "traders": [
    {
      "scan_interval_minutes": 60,    // æ‰«æé—´éš”ï¼ˆå‡å°‘å†…å­˜å ç”¨ï¼‰
      "initial_balance": 1000          // åˆå§‹ä½™é¢
    }
  ],
  "max_candidates": 5,                 // å€™é€‰å¸ç§æ•°é‡ï¼ˆå‡å°‘å†…å­˜å ç”¨ï¼‰
  "proxy": {"enabled": false},         // å…³é—­ä»£ç†ï¼ˆé˜¿é‡Œäº‘ä¸éœ€è¦ï¼‰
  "risk_control": {
    "max_open_orders_per_cycle": 1,   // æ¯å‘¨æœŸæœ€å¤§å¼€ä»“æ•°
    "max_total_open_positions": 2     // æœ€å¤§æ€»æŒä»“æ•°
  },
  "auth": {
    "enabled": true,                   // å¯ç”¨è®¤è¯
    "registration_enabled": true       // å…è®¸æ³¨å†Œ
  }
}
```

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# ç¼–è¾‘é…ç½®
nano config_template.json

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp config_template.json root@47.236.159.60:/opt/nofx/config.json

# é‡å¯æœåŠ¡
./server_manage.sh restart
```

---

## ğŸ“– ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæ—¥å¸¸è®¿é—®å‰ç«¯

```bash
# 1. å¯åŠ¨SSHéš§é“
cd ~/nofx-aliyun-deploy
./tunnel_simple.sh

# 2. åœ¨æµè§ˆå™¨è®¿é—®
# http://localhost:3333

# 3. å®ŒæˆåæŒ‰ Ctrl+C åœæ­¢éš§é“
```

### åœºæ™¯2ï¼šç¼–è¾‘æœåŠ¡å™¨æ–‡ä»¶ â­ æ–°å¢

```bash
# 1. æŒ‚è½½è¿œç¨‹ç›®å½•
cd ~/nofx-aliyun-deploy
./remote_mount.sh open

# 2. åœ¨Cursorä¸­ç¼–è¾‘æ–‡ä»¶
# ç¼–è¾‘ remote-nofx/ ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶

# 3. å¦‚æœä¿®æ”¹äº†é…ç½®ï¼Œé‡å¯æœåŠ¡
./server_manage.sh restart

# 4. å®Œæˆåå¸è½½
./remote_mount.sh umount
```

### åœºæ™¯3ï¼šæŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€

```bash
cd ~/nofx-aliyun-deploy

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./server_manage.sh status

# æŸ¥çœ‹æ—¥å¿—
./server_manage.sh logs

# ç³»ç»Ÿç›‘æ§
./server_manage.sh monitor
```

### åœºæ™¯4ï¼šä¿®æ”¹é…ç½®

```bash
cd ~/nofx-aliyun-deploy

# æ–¹å¼1ï¼šä½¿ç”¨è¿œç¨‹æŒ‚è½½ï¼ˆæ¨èï¼‰â­
./remote_mount.sh open
# åœ¨Cursorä¸­ç¼–è¾‘ remote-nofx/config.json
./server_manage.sh restart

# æ–¹å¼2ï¼šä½¿ç”¨ç®¡ç†è„šæœ¬
./server_manage.sh config

# æ–¹å¼3ï¼šæ‰‹åŠ¨ç¼–è¾‘å¹¶ä¸Šä¼ 
nano config_template.json
scp config_template.json root@47.236.159.60:/opt/nofx/config.json
./server_manage.sh restart
```

### åœºæ™¯5ï¼šå¤‡ä»½æ•°æ®

```bash
cd ~/nofx-aliyun-deploy

# æ‰§è¡Œå¤‡ä»½
./server_manage.sh backup

# å¤‡ä»½æ–‡ä»¶ä¼šä¸‹è½½åˆ° ./backups/ ç›®å½•
```

### åœºæ™¯6ï¼šæ›´æ–°ä»£ç 

```bash
cd ~/nofx-aliyun-deploy

# ä»GitHubæ‹‰å–æœ€æ–°ä»£ç å¹¶é‡å¯
./server_manage.sh update
```

### åœºæ™¯7ï¼šè¯Šæ–­é—®é¢˜

```bash
cd ~/nofx-aliyun-deploy

# è¿è¡Œè¯Šæ–­è„šæœ¬
./server_manage.sh diagnose

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
./server_manage.sh logs backend
```

---

## ğŸ” å®‰å…¨å»ºè®®

### 1. ä½¿ç”¨SSHéš§é“è®¿é—®ï¼ˆæ¨èï¼‰

é€šè¿‡SSHéš§é“è®¿é—®ï¼Œä¸æš´éœ²ç«¯å£åˆ°å…¬ç½‘ï¼š
```bash
./tunnel_simple.sh
# è®¿é—® http://localhost:3333
```

**ä¼˜ç‚¹**ï¼š
- âœ… é€šè¿‡SSHåŠ å¯†ä¼ è¾“
- âœ… ä¸éœ€è¦ä¿®æ”¹é˜¿é‡Œäº‘å®‰å…¨ç»„
- âœ… æ›´å®‰å…¨
- âœ… å¯ä»¥éšæ—¶å¼€å…³

### 2. é…ç½®SSHå¯†é’¥ç™»å½•ï¼ˆå¿…é¡»ï¼‰â­

ä½¿ç”¨è¿œç¨‹æŒ‚è½½åŠŸèƒ½éœ€è¦é…ç½®SSHå¯†é’¥ï¼š

```bash
# ç”ŸæˆSSHå¯†é’¥ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
ssh-keygen -t rsa -b 4096

# ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨
ssh-copy-id root@47.236.159.60

# æµ‹è¯•å…å¯†ç™»å½•
ssh root@47.236.159.60 "echo 'SSHè¿æ¥æˆåŠŸ'"
```

### 3. é…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„ï¼ˆå¦‚æœéœ€è¦ç›´æ¥è®¿é—®ï¼‰

å¦‚æœä½ æƒ³ç›´æ¥è®¿é—®ï¼ˆä¸æ¨èï¼‰ï¼Œéœ€è¦åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°é…ç½®ï¼š

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ ECS å®ä¾‹ç®¡ç†
3. ç‚¹å‡»"å®‰å…¨ç»„" â†’ "é…ç½®è§„åˆ™"
4. æ·»åŠ å…¥æ–¹å‘è§„åˆ™ï¼š
   - ç«¯å£ 3000 (å‰ç«¯)
   - ç«¯å£ 8080 (åç«¯API)
   - é™åˆ¶æºIPä¸ºä½ çš„å…¬ç½‘IP

---

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹ç³»ç»Ÿèµ„æº

```bash
# ä½¿ç”¨ç®¡ç†è„šæœ¬
./server_manage.sh monitor

# æˆ–SSHåˆ°æœåŠ¡å™¨æ‰‹åŠ¨æŸ¥çœ‹
ssh root@47.236.159.60
free -h                    # å†…å­˜ä½¿ç”¨
df -h                      # ç£ç›˜ä½¿ç”¨
docker stats --no-stream   # å®¹å™¨èµ„æºä½¿ç”¨
```

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
./server_manage.sh logs

# æŸ¥çœ‹åç«¯æ—¥å¿—
./server_manage.sh logs backend

# æŸ¥çœ‹å‰ç«¯æ—¥å¿—
./server_manage.sh logs frontend
```

### å®šæœŸå¤‡ä»½

```bash
# æ‰‹åŠ¨å¤‡ä»½
./server_manage.sh backup

# æœåŠ¡å™¨ä¸Šå·²é…ç½®è‡ªåŠ¨å¤‡ä»½ï¼ˆæ¯å¤©å‡Œæ™¨2ç‚¹ï¼‰
# å¤‡ä»½ä¿ç•™7å¤©
```

### æ¸…ç†æ—§æ—¥å¿—

```bash
# æ¸…ç†30å¤©å‰çš„æ—¥å¿—
./server_manage.sh clean-logs
```

---

## ğŸ†˜ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šæ— æ³•è®¿é—®å‰ç«¯

**ç—‡çŠ¶**ï¼šæµè§ˆå™¨æ˜¾ç¤º"æ— æ³•è®¿é—®"æˆ–"è¿æ¥è¢«æ‹’ç»"

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# 1. æ£€æŸ¥SSHéš§é“æ˜¯å¦è¿è¡Œ
ps aux | grep "ssh.*3333"

# 2. æ£€æŸ¥ç«¯å£æ˜¯å¦ç›‘å¬
lsof -i :3333

# 3. æ£€æŸ¥æœåŠ¡å™¨ä¸Šçš„æœåŠ¡
./server_manage.sh status

# 4. æŸ¥çœ‹æ—¥å¿—
./server_manage.sh logs
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿SSHéš§é“æ­£åœ¨è¿è¡Œ
- ç­‰å¾…5-10ç§’è®©éš§é“å®Œå…¨å»ºç«‹
- é‡å¯SSHéš§é“ï¼šå…³é—­åé‡æ–°è¿è¡Œ `./tunnel_simple.sh`

### é—®é¢˜2ï¼šå†…å­˜ä¸è¶³

**ç—‡çŠ¶**ï¼šæœåŠ¡å™¨å“åº”æ…¢æˆ–å®¹å™¨è¢«æ€

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
./server_manage.sh monitor

# æŸ¥çœ‹Swapä½¿ç”¨
ssh root@47.236.159.60 "free -h"
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥Swapæ˜¯å¦å¯ç”¨ï¼ˆåº”è¯¥æœ‰2Gï¼‰
2. å‡å°‘æ‰«æé¢‘ç‡ï¼šä¿®æ”¹ `scan_interval_minutes` ä¸º 120
3. å‡å°‘å€™é€‰å¸ç§ï¼šä¿®æ”¹ `max_candidates` ä¸º 3
4. é‡å¯æœåŠ¡ï¼š`./server_manage.sh restart`

### é—®é¢˜3ï¼šå®¹å™¨å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**ï¼š`docker ps` æ˜¾ç¤ºå®¹å™¨ä¸æ–­é‡å¯

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# æŸ¥çœ‹å®¹å™¨æ—¥å¿—
./server_manage.sh logs backend

# è¿è¡Œè¯Šæ–­
./server_manage.sh diagnose

# æ£€æŸ¥é…ç½®æ–‡ä»¶
./server_manage.sh view-config
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`/opt/nofx/config.json`
- æ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆJSONæ ¼å¼ï¼‰
- é‡æ–°æ„å»ºï¼š`./server_manage.sh rebuild`

### é—®é¢˜4ï¼šSSHéš§é“è¿æ¥å¤±è´¥

**ç—‡çŠ¶**ï¼šè¿è¡Œ `./tunnel_simple.sh` åæ— æ³•è¿æ¥

**æ’æŸ¥æ­¥éª¤**ï¼š
```bash
# æµ‹è¯•SSHè¿æ¥
ssh root@47.236.159.60 "echo 'SSHè¿æ¥æ­£å¸¸'"

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3333
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
- é…ç½®SSHå¯†é’¥ï¼š`ssh-copy-id root@47.236.159.60`
- æ€æ‰å ç”¨ç«¯å£çš„è¿›ç¨‹ï¼š`kill <è¿›ç¨‹ID>`
- ä½¿ç”¨æ‰‹åŠ¨æ–¹å¼ï¼š`ssh -L 3333:localhost:3000 root@47.236.159.60`

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨

| æ“ä½œ | å‘½ä»¤ |
|------|------|
| **SSHéš§é“** | |
| å¯åŠ¨éš§é“ï¼ˆæ¨èï¼‰ | `./tunnel_simple.sh` |
| å¯åŠ¨éš§é“ï¼ˆåå°ï¼‰ | `./tunnel.sh start` |
| åœæ­¢éš§é“ | æŒ‰ `Ctrl+C` æˆ– `./tunnel.sh stop` |
| æŸ¥çœ‹éš§é“çŠ¶æ€ | `./tunnel.sh status` |
| **è¿œç¨‹æŒ‚è½½** | |
| æŒ‚è½½å¹¶æ‰“å¼€ | `./remote_mount.sh open` |
| åªæŒ‚è½½ | `./remote_mount.sh mount` |
| å¸è½½ | `./remote_mount.sh umount` |
| æŸ¥çœ‹çŠ¶æ€ | `./remote_mount.sh status` |
| **æœåŠ¡å™¨ç®¡ç†** | |
| æŸ¥çœ‹çŠ¶æ€ | `./server_manage.sh status` |
| æŸ¥çœ‹æ—¥å¿— | `./server_manage.sh logs` |
| é‡å¯æœåŠ¡ | `./server_manage.sh restart` |
| å¤‡ä»½æ•°æ® | `./server_manage.sh backup` |
| æ›´æ–°ä»£ç  | `./server_manage.sh update` |
| ç³»ç»Ÿç›‘æ§ | `./server_manage.sh monitor` |
| è¯Šæ–­é—®é¢˜ | `./server_manage.sh diagnose` |
| SSHç™»å½• | `./server_manage.sh ssh` |
| **é…ç½®ç®¡ç†** | |
| ç¼–è¾‘é…ç½® | `./server_manage.sh config` |
| æŸ¥çœ‹é…ç½® | `./server_manage.sh view-config` |
| **è®¿é—®åœ°å€** | |
| å‰ç«¯ | `http://localhost:3333` |
| åç«¯API | `http://localhost:8888` |

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. æ—¥å¸¸ä½¿ç”¨æµç¨‹

```bash
# æ—©ä¸Šå¼€å§‹å·¥ä½œ
cd ~/nofx-aliyun-deploy
./tunnel_simple.sh          # å¯åŠ¨éš§é“è®¿é—®å‰ç«¯
./remote_mount.sh open       # æŒ‚è½½è¿œç¨‹ç›®å½•ç¼–è¾‘ä»£ç 

# å·¥ä½œæœŸé—´
./server_manage.sh status   # å®šæœŸæ£€æŸ¥çŠ¶æ€
./server_manage.sh logs     # æŸ¥çœ‹æ—¥å¿—

# ä¸‹ç­å‰
./remote_mount.sh umount    # å¸è½½è¿œç¨‹ç›®å½•
# æŒ‰ Ctrl+C åœæ­¢éš§é“
```

### 2. å®šæœŸç»´æŠ¤

```bash
# æ¯å‘¨
./server_manage.sh backup   # å¤‡ä»½æ•°æ®
./server_manage.sh monitor  # æ£€æŸ¥èµ„æºä½¿ç”¨

# æ¯æœˆ
./server_manage.sh clean-logs  # æ¸…ç†æ—§æ—¥å¿—
./server_manage.sh update      # æ›´æ–°ä»£ç 
```

### 3. é…ç½®ä¿®æ”¹æµç¨‹

```bash
# 1. ç¼–è¾‘é…ç½®
./server_manage.sh config

# 2. é‡å¯æœåŠ¡
./server_manage.sh restart

# 3. éªŒè¯
./server_manage.sh status
./server_manage.sh logs
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [QUICK_START.md](QUICK_START.md) - å¿«é€Ÿå¼€å§‹æŒ‡å—
- [NOFXé¡¹ç›®ä¸»é¡µ](https://github.com/NoFxAiOS/nofx)
- [Dockeræ–‡æ¡£](https://docs.docker.com/)
- [é˜¿é‡Œäº‘ECSæ–‡æ¡£](https://help.aliyun.com/product/25365.html)

---

## ğŸ”„ æ›´æ–°æ—¥å¿—

### 2024-12-20
- âœ… åˆ›å»ºéƒ¨ç½²ç®¡ç†ç›®å½•
- âœ… æ·»åŠ ä¸€é”®éƒ¨ç½²è„šæœ¬
- âœ… æ·»åŠ SSHéš§é“ç®¡ç†è„šæœ¬ï¼ˆå®Œæ•´ç‰ˆå’Œç®€åŒ–ç‰ˆï¼‰
- âœ… æ·»åŠ è¿œç¨‹ç›®å½•æŒ‚è½½è„šæœ¬ï¼ˆSSHFSï¼‰â­
- âœ… æ·»åŠ æœåŠ¡å™¨ç®¡ç†è„šæœ¬
- âœ… æ·»åŠ é…ç½®æ–‡ä»¶æ¨¡æ¿
- âœ… å®Œå–„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- âœ… ä¼˜åŒ–SSHéš§é“è¿æ¥ç¨³å®šæ€§
- âœ… é…ç½®SSHå¯†é’¥å…å¯†ç™»å½•

---

## ğŸ’¡ æç¤º

- **æ¨èä½¿ç”¨ `tunnel_simple.sh`**ï¼šæœ€ç¨³å®šå¯é çš„SSHéš§é“
- **æ¨èä½¿ç”¨ `remote_mount.sh`**ï¼šç›´æ¥ç¼–è¾‘æœåŠ¡å™¨æ–‡ä»¶ï¼Œæ— éœ€æ‰©å±•
- **ä¿æŒSSHéš§é“çª—å£æ‰“å¼€**ï¼šå…³é—­çª—å£ä¼šæ–­å¼€è¿æ¥
- **ä½¿ç”¨å®Œæ¯•åå¸è½½è¿œç¨‹ç›®å½•**ï¼š`./remote_mount.sh umount`
- **å®šæœŸå¤‡ä»½æ•°æ®**ï¼šä½¿ç”¨ `./server_manage.sh backup`
- **é‡åˆ°é—®é¢˜å…ˆè¯Šæ–­**ï¼šä½¿ç”¨ `./server_manage.sh diagnose`

---

**ç»´æŠ¤è€…**: mc
**æœåŠ¡å™¨**: é˜¿é‡Œäº‘ ECS (47.236.159.60)
**æœ€åæ›´æ–°**: 2024-12-20

**ğŸ‰ ç¥ä½¿ç”¨æ„‰å¿«ï¼**
